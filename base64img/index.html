<!DOCTYPE html>

<head></head>

<body>
    <img crossOrigin="anonymous" src="./img/tu_img02.png" alt="" style="width: 350px;height: 420px;" id='boximg' >
    <canvas id="canvas" style="width: 350px;height:220px"></canvas>
</body>
<script>
//     var canvas = document.getElementById("canvas"); //获取canvas
//     var imgpath = document.getElementById("boximg"); //获取canvas
//     let ctx = canvas.getContext("2d"); //对应的CanvasRenderingContext2D对象(画笔)
//     let base64 = '';
//     imgpath.onload = function () {
//         //图片加载完，再draw 和 toDataURL
//         ctx.drawImage(imgpath, 0, 0);
//         base64 = canvas.toDataURL("image/png");
//         console.log(base64);
//     };
    //bug    跨域  canvas  
	
	
	var canvas1 = document.getElementById("canvas");
	var imgtup = document.getElementById("boximg");
	
	var ctx = canvas1.getContext("2d");
	var img = new Image();
	img.src = imgtup.src
	
	img.onload = function (){
	    ctx.save();//保存状态
	    ctx.translate(0,0);//设置画布上的(0,0)位置，也就是旋转的中心点
	    ctx.rotate(45*Math.PI/-90);
	    ctx.drawImage(img,-320,-40);//把图片绘制在旋转的中心点，
	    ctx.restore();//恢复状态
		console.log(canvas1.toDataURL("image/png"))
	}
// 	  document.getElementsByClassName('adminBox')[0].onclick = ()=>{
// 		  console.log(canvas1.toDataURL("image/png"))
// 	  };
	
</script>